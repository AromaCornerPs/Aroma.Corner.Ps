<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Aroma Corner - Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø·ÙˆØ±</title>
<meta name="description" content="Ù…ØªØ¬Ø± Aroma Corner Ù„Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø¨Ø£Ø­Ø¬Ø§Ù… Ù…Ø®ØªÙ„ÙØ©. Ø§ÙƒØªØ´Ù ØªØ´ÙƒÙŠÙ„Ø© ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ø±Ø¬Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù†Ø³Ø§Ø¦ÙŠØ© Ø¨Ø£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø©.">
<meta name="keywords" content="Ø¹Ø·ÙˆØ±, Ø¹Ø·ÙˆØ± Ø±Ø¬Ø§Ù„ÙŠØ©, Ø¹Ø·ÙˆØ± Ù†Ø³Ø§Ø¦ÙŠØ©, ÙƒØ±ÙŠØ¯, ØªÙˆÙ… ÙÙˆØ±Ø¯, Ø´Ø§Ù†ÙŠÙ„, Ø¹Ø·ÙˆØ± ÙÙ„Ø³Ø·ÙŠÙ†">

<!-- Open Graph -->
<meta property="og:title" content="Aroma Corner - Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø·ÙˆØ±">
<meta property="og:description" content="Ø§ÙƒØªØ´Ù ØªØ´ÙƒÙŠÙ„Ø© ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø¨Ø£Ø­Ø¬Ø§Ù… Ù…Ø®ØªÙ„ÙØ©">
<meta property="og:type" content="website">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

<style>
* { 
  box-sizing: border-box; 
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Cairo', sans-serif;
  background: #f8fafc;
  color: #1e293b;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  line-height: 1.6;
}

/* Header */
header {
  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  color: #f8fafc;
  padding: 1.5rem 2rem;
  text-align: center;
  box-shadow: 0 4px 20px rgba(15, 23, 42, 0.3);
}

header h1 {
  font-size: 2.5rem;
  font-weight: 900;
  letter-spacing: 0.1rem;
  margin: 0;
}

/* Navigation */
nav {
  background: #1e293b;
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem;
  box-shadow: 0 3px 15px rgba(30, 41, 59, 0.2);
  flex-wrap: wrap;
}

nav button {
  background: transparent;
  color: #f8fafc;
  border: none;
  font-size: 1rem;
  padding: 0.75rem 1.25rem;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  position: relative;
  font-family: inherit;
}

nav button:hover, nav button.active { 
  background: #0f172a;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.3);
}

.nav-badge {
  position: absolute;
  top: -8px;
  left: -8px;
  background: #ef4444;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  font-size: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

/* Main Content */
main {
  flex-grow: 1;
  max-width: 1400px;
  margin: 2rem auto;
  padding: 0 1rem;
  width: 100%;
}

/* Home Page */
#home-page {
  text-align: center;
  margin-bottom: 3rem;
  background-image: url('https://i.pinimg.com/736x/f4/28/a8/f428a8f8fcda2f0f5247f43acf1dea16.jpg');
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  border-radius: 24px;
  padding: 4rem 2rem;
  position: relative;
  overflow: hidden;
}

#home-page::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.9);
  z-index: 1;
}

#home-page > * {
  position: relative;
  z-index: 2;
}

#home-page h1 {
  font-size: 3.5rem;
  font-weight: 900;
  margin-bottom: 1.5rem;
  color: #0f172a;
  text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
}

#home-page p {
  font-size: 1.4rem;
  max-width: 800px;
  margin: 0 auto 2rem;
  line-height: 1.6;
  color: #374151;
  font-weight: 600;
}

/* Search Container */
.search-container {
  max-width: 800px;
  margin: 2rem auto;
  position: relative;
}

.search-box {
  background: white;
  border-radius: 20px 20px 0 0;
  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.15);
  padding: 2.5rem 2rem 2rem;
  border-bottom: 3px solid #e5e7eb;
}

.search-box h2 {
  color: #0f172a;
  margin-bottom: 1.5rem;
  font-size: 2.2rem;
  font-weight: 800;
}

#main-search-input {
  width: 100%;
  padding: 1rem 1.5rem;
  border-radius: 16px;
  border: 2px solid #e5e7eb;
  font-size: 1.2rem;
  font-family: inherit;
  transition: all 0.3s ease;
  background: #f9fafb;
}

#main-search-input:focus { 
  border: 2px solid #1e293b; 
  outline: none;
  background: white;
  box-shadow: 0 0 0 4px rgba(30, 41, 59, 0.1);
}

.search-results-container {
  background: white;
  border-radius: 0 0 20px 20px;
  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.15);
  min-height: 120px;
  display: none;
  padding: 2rem;
}

.search-results-container.show {
  display: block;
}

/* Products Grid */
.products {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2rem;
  margin-bottom: 2rem;
}

.product-card {
  background: white;
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(15, 23, 42, 0.1);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: all 0.3s ease;
  position: relative;
}

.product-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(15, 23, 42, 0.2);
}

.product-image {
  width: 100%;
  height: 220px;
  object-fit: cover;
  border-bottom: 4px solid #1e293b;
}

.product-info {
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}

.product-title {
  font-size: 1.4rem;
  font-weight: 800;
  color: #0f172a;
  margin-bottom: 0.75rem;
  min-height: 56px;
}

.product-desc {
  font-size: 1rem;
  color: #6b7280;
  margin-bottom: 1rem;
  min-height: 60px;
  line-height: 1.5;
}

.product-options {
  margin-bottom: 1rem;
}

.product-options label {
  font-size: 1rem;
  color: #374151;
  margin-left: 0.5rem;
  font-weight: 600;
}

.product-options select {
  padding: 0.75rem 1rem;
  border-radius: 12px;
  border: 2px solid #e5e7eb;
  font-size: 1rem;
  font-family: inherit;
  margin-right: 0.5rem;
  width: 100%;
  margin-top: 0.5rem;
  transition: border-color 0.3s ease;
}

.product-options select:focus {
  border-color: #1e293b;
  outline: none;
}

.product-price {
  font-size: 1.3rem;
  font-weight: 800;
  color: #0f172a;
  margin-bottom: 1rem;
  text-align: left;
  direction: ltr;
}

.wishlist-btn {
  position: absolute;
  top: 12px;
  left: 12px;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.wishlist-btn:hover {
  background: white;
  transform: scale(1.1);
}

.wishlist-btn.active {
  background: #ef4444;
  color: white;
}

.add-to-cart {
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  color: white;
  border: none;
  padding: 1rem 1.5rem;
  border-radius: 16px;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: inherit;
}

.add-to-cart:hover { 
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(30, 41, 59, 0.3);
}

.add-to-cart:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Filter Buttons */
.filter-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.filter-button {
  background: #f1f5f9;
  border: 2px solid #1e293b;
  border-radius: 12px;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.3s ease;
  font-family: inherit;
  color: #0f172a;
}

.filter-button:hover, .filter-button.active {
  background: #1e293b;
  color: white;
  transform: translateY(-2px);
}

/* Section Banner */
.section-banner {
  margin-bottom: 2rem;
  padding: 1.5rem 2rem;
  background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
  border-radius: 16px;
  border: 3px solid #1e293b;
  color: #0f172a;
  text-align: center;
  font-weight: 800;
  font-size: 1.3rem;
}

/* Cart Styles */
.cart {
  background: white;
  box-shadow: 0 15px 35px rgba(15, 23, 42, 0.15);
  border-radius: 20px;
  padding: 2rem;
  max-width: 1000px;
  margin: 0 auto;
}

.cart h2 {
  margin: 0 0 2rem 0;
  font-size: 2.2rem;
  font-weight: 800;
  color: #0f172a;
  text-align: center;
}

.cart-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding: 1.5rem;
  border: 2px solid #f1f5f9;
  border-radius: 16px;
  transition: all 0.3s ease;
}

.cart-item:hover {
  border-color: #e2e8f0;
  box-shadow: 0 4px 12px rgba(15, 23, 42, 0.1);
}

.cart-item-details {
  text-align: right;
  flex: 1;
}

.cart-item-title {
  font-weight: 800;
  font-size: 1.2rem;
  color: #1e293b;
  margin-bottom: 0.5rem;
}

.cart-item-quantity {
  font-size: 1rem;
  color: #6b7280;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-top: 0.75rem;
}

.quantity-btn {
  background: #f1f5f9;
  border: 2px solid #e2e8f0;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  font-size: 1.2rem;
  cursor: pointer;
  color: #1e293b;
  font-weight: bold;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.quantity-btn:hover { 
  background: #e2e8f0;
  transform: scale(1.1);
}

.cart-item-price {
  font-weight: 800;
  font-size: 1.3rem;
  color: #0f172a;
  min-width: 100px;
  text-align: left;
  direction: ltr;
}

.remove-btn {
  background: none;
  border: none;
  font-size: 1.8rem;
  color: #ef4444;
  cursor: pointer;
  font-weight: 900;
  margin-left: 1rem;
  padding: 0.5rem;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.remove-btn:hover {
  background: #fef2f2;
  transform: scale(1.1);
}

.cart-total {
  font-weight: 900;
  font-size: 2rem;
  color: #0f172a;
  text-align: center;
  margin: 2rem 0;
  padding: 1.5rem;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border-radius: 16px;
  border: 2px solid #e2e8f0;
}

/* Points System */
.points-display {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  border: 2px solid #f59e0b;
  border-radius: 16px;
  padding: 1.5rem;
  margin: 1rem 0;
  text-align: center;
}

.points-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 1rem 0;
}

.points-card {
  background: white;
  padding: 1.5rem;
  border-radius: 12px;
  border: 2px solid #e5e7eb;
  text-align: center;
}

.points-value {
  font-size: 2rem;
  font-weight: 900;
  color: #0f172a;
  margin-bottom: 0.5rem;
}

.points-label {
  color: #6b7280;
  font-weight: 600;
}

.progress-bar {
  width: 100%;
  height: 12px;
  background: #e5e7eb;
  border-radius: 6px;
  overflow: hidden;
  margin: 1rem 0;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
  transition: width 0.5s ease;
}

/* Order Form */
.cart-form {
  background: #f8fafc;
  border-radius: 16px;
  padding: 2rem;
  margin-top: 2rem;
  border: 2px solid #e2e8f0;
}

.cart-form label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 700;
  color: #1e293b;
  font-size: 1rem;
}

.cart-form input, .cart-form select, .cart-form textarea {
  width: 100%;
  padding: 1rem;
  margin-bottom: 1.5rem;
  border-radius: 12px;
  border: 2px solid #e5e7eb;
  font-size: 1rem;
  font-family: inherit;
  transition: border-color 0.3s ease;
}

.cart-form input:focus, .cart-form select:focus, .cart-form textarea:focus {
  border-color: #1e293b;
  outline: none;
  box-shadow: 0 0 0 3px rgba(30, 41, 59, 0.1);
}

.submit-btn {
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  color: white;
  border: none;
  padding: 1.25rem 2rem;
  border-radius: 16px;
  font-size: 1.2rem;
  font-weight: 800;
  cursor: pointer;
  transition: all 0.3s ease;
  width: 100%;
  font-family: inherit;
}

.submit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(30, 41, 59, 0.3);
}

/* Notifications */
.notification {
  position: fixed;
  top: 20px;
  left: 20px;
  background: white;
  border-radius: 12px;
  padding: 1rem 1.5rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  border-left: 4px solid #10b981;
  animation: slideIn 0.3s ease;
  max-width: 400px;
}

.notification.error {
  border-left-color: #ef4444;
}

.notification.info {
  border-left-color: #3b82f6;
}

@keyframes slideIn {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Reviews */
.reviews-section {
  margin: 1rem 0;
  padding: 1rem;
  background: #f9fafb;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
}

.stars {
  display: flex;
  gap: 2px;
  margin-bottom: 0.5rem;
}

.star {
  color: #d1d5db;
  font-size: 1rem;
  cursor: pointer;
  transition: color 0.2s ease;
}

.star.filled {
  color: #fbbf24;
}

.review-form {
  margin-top: 1rem;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.review-form input, .review-form textarea {
  width: 100%;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 0.9rem;
}

.review-item {
  background: white;
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
  font-size: 0.85rem;
}

/* Responsive Design */
@media(max-width: 768px) {
  header h1 {
    font-size: 2rem;
  }
  
  #home-page {
    padding: 2rem 1rem;
    margin: 1rem;
  }
  
  #home-page h1 {
    font-size: 2.5rem;
  }
  
  #home-page p {
    font-size: 1.1rem;
  }
  
  .products {
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }
  
  .cart-item {
    flex-direction: column;
    gap: 1rem;
    text-align: center;
  }
  
  .cart-item-details {
    text-align: center;
  }
  
  .points-info {
    grid-template-columns: 1fr;
  }
  
  nav {
    padding: 0.5rem;
  }
  
  nav button {
    font-size: 0.9rem;
    padding: 0.6rem 1rem;
  }
}

/* Loading States */
.loading {
  opacity: 0.6;
  pointer-events: none;
  position: relative;
}

.loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  border: 2px solid #f3f3f3;
  border-top: 2px solid #1e293b;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  transform: translate(-50%, -50%);
}

@keyframes spin {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Empty States */
.empty-state {
  text-align: center;
  padding: 3rem 2rem;
  color: #6b7280;
}

.empty-state h3 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
  color: #374151;
}

/* Accessibility */
button:focus, input:focus, select:focus, textarea:focus {
  outline: 2px solid #1e293b;
  outline-offset: 2px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
</style>
</head>

<body>
<header>
  <h1>Aroma Corner - Ø±ÙƒÙ† Ø§Ù„Ø¹Ø·ÙˆØ±</h1>
</header>

<!-- ÙÙŠ Ù‚Ø³Ù… Ø§Ù„ØªÙ†Ù‚Ù„ØŒ Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø²Ø± -->
<nav>
  <button class="nav-btn active" data-section="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button class="nav-btn" data-section="men">Ø¹Ø·ÙˆØ± Ù„Ù„Ø±Ø¬Ø§Ù„</button>
  <button class="nav-btn" data-section="women">Ø¹Ø·ÙˆØ± Ù„Ù„Ù†Ø³Ø§Ø¡</button>
  <button class="nav-btn" data-section="packages">Ø¨ÙƒØ¬Ø§Øª Ø§Ù„Ø¹Ø·ÙˆØ±</button>
  <button class="nav-btn" data-section="cart">
    Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚
    <span class="nav-badge" id="cart-badge" style="display: none;">0</span>
  </button>
  <button class="nav-btn" data-section="wishlist">
    Ø§Ù„Ù…ÙØ¶Ù„Ø© â¤ï¸
    <span class="nav-badge" id="wishlist-badge" style="display: none;">0</span>
  </button>
  <button class="nav-btn" data-section="points">
    Ø§Ù„Ù†Ù‚Ø§Ø· â­
    <span class="nav-badge" id="points-badge" style="display: none;">0</span>
  </button>
</nav>
<main>
  <!-- Home Section -->
  <section id="home" class="store-section">
    <div id="home-page">
      <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Aroma Corner</h1>
      <p>Ø¬Ø±Ù‘Ø¨ Ø¹Ø·Ø±Ùƒ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„Ù…ÙØ¶Ù„ Ø¨Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ø³Ø¨Ùƒ! Ø§ÙƒØªØ´Ù ØªØ´ÙƒÙŠÙ„ØªÙ†Ø§ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù…Ù† Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø© Ø¨Ø£Ø­Ø¬Ø§Ù…: 15mlØŒ 10mlØŒ 5mlØŒ 3ml.</p>
      
      <div class="search-container">
        <div class="search-box">
          <h2>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ø·Ø±Ùƒ Ø§Ù„Ù…ÙØ¶Ù„</h2>
          <input type="text" id="main-search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ø·Ø± Ø£Ùˆ Ø¨ÙƒØ¬..." oninput="searchProducts(this.value)">
        </div>
        <div class="search-results-container" id="search-results-container">
          <div class="search-results-header">
            <h3 id="search-results-title">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h3>
            <div class="search-results-count" id="search-results-count"></div>
          </div>
          <div id="search-results" class="products"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Men Section -->
  <section id="men" class="store-section" hidden>
    <div class="section-banner">ØªØ´ÙƒÙŠÙ„Ø© Ù…Ø®ØªØ§Ø±Ø© Ù…Ù† Ø£ÙØ¶Ù„ Ø¹Ø·ÙˆØ± Ø§Ù„Ø±Ø¬Ø§Ù„ Ø¨Ø±ÙˆØ§Ø¦Ø­ Ø¬Ø°Ø§Ø¨Ø© ÙˆÙ‚ÙˆÙŠØ©</div>
    <div class="filter-buttons">
      <button class="filter-button" onclick="filterProducts('men', 'most-popular')">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('men', 'price-asc')">Ù…Ù† Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø±Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('men', 'price-desc')">Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø³Ø¹Ø±Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('men', 'latest')">Ø§Ù„Ø£Ø­Ø¯Ø«</button>
    </div>
    <div class="products" id="men-products"></div>
  </section>

  <!-- Women Section -->
  <section id="women" class="store-section" hidden>
    <div class="section-banner">Ø¹Ø·ÙˆØ± Ù†Ø³Ø§Ø¦ÙŠØ© Ù†Ø§Ø¹Ù…Ø© ÙˆÙÙˆØ§Ø­Ø© ØªØ¨Ø±Ø² Ø£Ù†ÙˆØ«ØªÙƒ ÙˆØªØ¬Ø¹Ù„Ùƒ Ù…ØªØ£Ù„Ù‚Ø©</div>
    <div class="filter-buttons">
      <button class="filter-button" onclick="filterProducts('women', 'most-popular')">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('women', 'price-asc')">Ù…Ù† Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø±Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('women', 'price-desc')">Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø³Ø¹Ø±Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('women', 'latest')">Ø§Ù„Ø£Ø­Ø¯Ø«</button>
    </div>
    <div class="products" id="women-products"></div>
  </section>

  <!-- Packages Section -->
  <section id="packages" class="store-section" hidden>
    <div class="section-banner">Ø¨ÙƒØ¬Ø§Øª Ø¹Ø·ÙˆØ± Ù…ØªÙ†ÙˆØ¹Ø© ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ø®Ø§ØµØ©</div>
    <div class="filter-buttons">
      <button class="filter-button" onclick="filterProducts('packages', 'most-popular')">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('packages', 'price-asc')">Ù…Ù† Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø³Ø¹Ø±Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('packages', 'price-desc')">Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø³Ø¹Ø±Ø§Ù‹</button>
      <button class="filter-button" onclick="filterProducts('packages', 'latest')">Ø§Ù„Ø£Ø­Ø¯Ø«</button>
    </div>
    <div class="products" id="packages-products"></div>
  </section>

  <!-- Cart Section -->
  <section id="cart" class="store-section" hidden>
    <div class="cart">
      <h2>ğŸ›’ Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
      
      <!-- Points Display -->
      <div class="points-display">
        <h3>ğŸ’ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª</h3>
        <div class="points-info">
          <div class="points-card">
            <div class="points-value" id="user-points">0</div>
            <div class="points-label">Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</div>
          </div>
          <div class="points-card">
            <div class="points-value" id="user-balance">0 â‚ª</div>
            <div class="points-label">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ù…ØªØ§Ø­</div>
          </div>
        </div>
        <div>
          <div style="font-size: 0.9rem; margin-bottom: 0.5rem;">Ø§Ù„ØªÙ‚Ø¯Ù… Ù†Ø­Ùˆ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:</div>
          <div class="progress-bar">
            <div class="progress-fill" id="points-progress" style="width: 0%"></div>
          </div>
          <div style="font-size: 0.8rem; color: #6b7280;" id="points-remaining">30 Ù†Ù‚Ø·Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ 1 Ø´ÙŠÙƒÙ„</div>
        </div>
      </div>

      <div id="cart-items"></div>
      <div class="cart-total" id="cart-total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0 â‚ª</div>
      
      <div style="text-align: center; margin: 1rem 0; padding: 1rem; background: #f1f5f9; border-radius: 12px;">
        <strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… (Ø´ÙŠÙƒÙ„ ÙÙ‚Ø·)</strong>
      </div>
      
      <!-- Order Form -->
      <form class="cart-form" id="order-form" onsubmit="submitOrder(event)">
        <label for="fullName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
        <input type="text" id="fullName" name="fullName" required placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
        
        <label for="phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <input type="tel" id="phone" name="phone" required pattern="^05[0-9]{8}$" placeholder="Ù…Ø«Ø§Ù„: 0591234567">
        
        <label for="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</label>
        <input type="text" id="address" name="address" required placeholder="Ù…Ø«Ø§Ù„: Ù†Ø§Ø¨Ù„Ø³ØŒ Ø±ÙÙŠØ¯ÙŠØ§ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©">
        
        <label for="region">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
        <select id="region" name="region" required onchange="updateShipping()">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
          <option value="westbank">Ø§Ù„Ø¶ÙØ© Ø§Ù„ØºØ±Ø¨ÙŠØ© (+20 Ø´ÙŠÙƒÙ„)</option>
          <option value="jerusalem">Ø§Ù„Ù‚Ø¯Ø³ (+30 Ø´ÙŠÙƒÙ„)</option>
          <option value="48">Ø§Ù„Ø¯Ø§Ø®Ù„ (+70 Ø´ÙŠÙƒÙ„)</option>
        </select>
        
        <label for="notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
        <textarea id="notes" name="notes" rows="3" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„Ø·Ù„Ø¨..."></textarea>
        
        <button type="submit" class="submit-btn">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ğŸš€</button>
      </form>
    </div>
  </section>

  <!-- Wishlist Section -->
  <section id="wishlist" class="store-section" hidden>
    <div class="cart">
      <h2>â¤ï¸ Ø§Ù„Ù…ÙØ¶Ù„Ø©</h2>
      <div id="wishlist-items" class="products"></div>
    </div>
  </section>

  <!-- Points Section -->
  <section id="points" class="store-section" hidden>
    <div class="cart">
      <h2>â­ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù…ÙƒØ§ÙØ¢Øª</h2>
      
      <div class="points-info">
        <div class="points-card">
          <div class="points-value" id="total-points">0</div>
          <div class="points-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·</div>
        </div>
        <div class="points-card">
          <div class="points-value" id="total-balance">0 â‚ª</div>
          <div class="points-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ØµÙŠØ¯</div>
        </div>
        <div class="points-card">
          <div class="points-value" id="total-spent">0 â‚ª</div>
          <div class="points-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</div>
        </div>
      </div>

      <div style="background: #f8fafc; padding: 2rem; border-radius: 16px; margin-top: 2rem;">
        <h3 style="text-align: center; margin-bottom: 1.5rem; color: #1e293b;">ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·ØŸ</h3>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
          <div style="text-align: center; padding: 1.5rem; background: white; border-radius: 12px; border: 2px solid #e2e8f0;">
            <div style="font-size: 2rem; margin-bottom: 1rem;">ğŸ’°</div>
            <h4 style="color: #1e293b; margin-bottom: 0.5rem;">Ø§ÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·</h4>
            <p style="color: #6b7280; font-size: 0.9rem;">ÙƒÙ„ 3 Ø´ÙŠÙƒÙ„ ØªÙ†ÙÙ‚Ù‡Ø§ = Ù†Ù‚Ø·Ø© ÙˆØ§Ø­Ø¯Ø©</p>
          </div>
          
          <div style="text-align: center; padding: 1.5rem; background: white; border-radius: 12px; border: 2px solid #e2e8f0;">
            <div style="font-size: 2rem; margin-bottom: 1rem;">â­</div>
            <h4 style="color: #1e293b; margin-bottom: 0.5rem;">Ø§Ø¬Ù…Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø·</h4>
            <p style="color: #6b7280; font-size: 0.9rem;">Ø§Ø¬Ù…Ø¹ 30 Ù†Ù‚Ø·Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ 1 Ø´ÙŠÙƒÙ„</p>
          </div>
          
          <div style="text-align: center; padding: 1.5rem; background: white; border-radius: 12px; border: 2px solid #e2e8f0;">
            <div style="font-size: 2rem; margin-bottom: 1rem;">ğŸ</div>
            <h4 style="color: #1e293b; margin-bottom: 0.5rem;">Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±ØµÙŠØ¯</h4>
            <p style="color: #6b7280; font-size: 0.9rem;">Ø§Ø³ØªØ®Ø¯Ù… Ø±ØµÙŠØ¯Ùƒ ÙÙŠ Ø£ÙŠ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
const productsData = {
  men: [
    {
      id: 'm1',
      title: "Creed Aventus",
      description: "Ø±Ø¬ÙˆÙ„ÙŠ Ø£ÙŠÙ‚ÙˆÙ†ÙŠØŒ Ø¨Ø±Ø§Ø¦Ø­Ø© ÙÙˆØ§ÙƒÙ‡ Ù…Ø¯Ø®Ù†Ø© ÙˆÙ„Ù…Ø³Ø© Ø¹Ù†Ø¨Ø±ÙŠØ© Ø®Ø´Ø¨ÙŠØ©.",
      image: "https://creedboutique.com/cdn/shop/files/aventus-100ml-bottle_3413e5f4-3eee-40b3-8451-2546a370ec5b.jpg?v=1734710265&width=1500",
      options: [
        { size: "5ml", price: 75 },
        { size: "3ml", price: 40 },
        { size: "10ml", price: 145 },
        { size: "15ml", price: 210 }
      ],
      popularity: 95,
      dateAdded: "2024-01-15"
    },
    {
      id: 'm2',
      title: "Creed Millesime",
      description: "ÙØ§Ø®Ø± Ù…Ù†Ø¹Ø´ ÙˆØ£Ù†ÙŠÙ‚ Ø¨Ù„Ù…Ø³Ø© Ø®Ø´Ø¨ÙŠØ© Ø­Ù…Ø¶ÙŠØ©.",
      image: "https://creedboutique.com/cdn/shop/files/1500x1500_MI.jpg?v=1742324990",
      options: [
        { size: "5ml", price: 75 },
        { size: "3ml", price: 40 },
        { size: "10ml", price: 140 },
        { size: "15ml", price: 205 }
      ],
      popularity: 88,
      dateAdded: "2024-02-20"
    },
    {
      id: 'm3',
      title: "Tom Ford Oud Wood",
      description: "Ø¹Ø·Ø± Ø´Ø±Ù‚ÙŠ ÙØ§Ø®Ø± Ø¨Ø®Ø´Ø¨ Ø§Ù„Ø¹ÙˆØ¯ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ§Ù„ÙˆØ±Ø¯.",
      image: "https://images.unsplash.com/photo-1541643600914-78b084683601?auto=format&fit=crop&w=400&q=80",
      options: [
        { size: "5ml", price: 85 },
        { size: "3ml", price: 45 },
        { size: "10ml", price: 160 },
        { size: "15ml", price: 230 }
      ],
      popularity: 92,
      dateAdded: "2024-03-10"
    },
    {
      id: 'm4',
      title: "Dior Sauvage",
      description: "Ø¹Ø·Ø± Ø±Ø¬Ø§Ù„ÙŠ Ù‚ÙˆÙŠ ÙˆØ¬Ø°Ø§Ø¨ Ø¨Ø±Ø§Ø¦Ø­Ø© Ø§Ù„Ø¨Ø±ØºÙ…ÙˆØª ÙˆØ§Ù„ÙÙ„ÙÙ„.",
      image: "https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?auto=format&fit=crop&w=400&q=80",
      options: [
        { size: "5ml", price: 70 },
        { size: "3ml", price: 38 },
        { size: "10ml", price: 130 },
        { size: "15ml", price: 190 }
      ],
      popularity: 90,
      dateAdded: "2024-01-25"
    }
  ],
  women: [
    {
      id: 'w1',
      title: "Chanel No. 5",
      description: "Ø¹Ø·Ø± Ù†Ø³Ø§Ø¦ÙŠ ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ Ø£ÙŠÙ‚ÙˆÙ†ÙŠ Ø¨Ø±Ø§Ø¦Ø­Ø© Ø§Ù„ÙŠØ§Ø³Ù…ÙŠÙ† ÙˆØ§Ù„ÙˆØ±Ø¯.",
      image: "https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?auto=format&fit=crop&w=400&q=80",
      options: [
        { size: "5ml", price: 80 },
        { size: "3ml", price: 42 },
        { size: "10ml", price: 150 },
        { size: "15ml", price: 220 }
      ],
      popularity: 96,
      dateAdded: "2024-01-20"
    },
    {
      id: 'w2',
      title: "Miss Dior",
      description: "Ø¹Ø·Ø± Ù†Ø³Ø§Ø¦ÙŠ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ Ø¨Ù„Ù…Ø³Ø© Ù…Ù† Ø§Ù„ÙˆØ±Ø¯ ÙˆØ§Ù„Ø¨Ø§ØªØ´ÙˆÙ„ÙŠ.",
      image: "https://images.unsplash.com/photo-1588405748880-12d1d2a59db9?auto=format&fit=crop&w=400&q=80",
      options: [
        { size: "5ml", price: 70 },
        { size: "3ml", price: 38 },
        { size: "10ml", price: 130 },
        { size: "15ml", price: 195 }
      ],
      popularity: 89,
      dateAdded: "2024-02-15"
    },
    {
      id: 'w3',
      title: "LancÃ´me La Vie Est Belle",
      description: "Ø¹Ø·Ø± Ù†Ø³Ø§Ø¦ÙŠ Ø­Ù„Ùˆ ÙˆØ£Ù†Ø«ÙˆÙŠ Ø¨Ø±Ø§Ø¦Ø­Ø© Ø§Ù„ÙØ§Ù†ÙŠÙ„ÙŠØ§ ÙˆØ§Ù„ÙŠØ§Ø³Ù…ÙŠÙ†.",
      image: "https://images.unsplash.com/photo-1563170351-be82bc888aa4?auto=format&fit=crop&w=400&q=80",
      options: [
        { size: "5ml", price: 75 },
        { size: "3ml", price: 40 },
        { size: "10ml", price: 140 },
        { size: "15ml", price: 205 }
      ],
      popularity: 93,
      dateAdded: "2024-03-05"
    }
  ],
  packages: [
    {
      id: 'p1',
      title: "Ø¨ÙƒØ¬ Ø¹Ø·ÙˆØ± Ù…Ù…ÙŠØ²Ø© Ù„Ù„Ø±Ø¬Ø§Ù„",
      description: "ØªØ´ÙƒÙŠÙ„Ø© Ù…Ù† 3 Ø¹Ø·ÙˆØ± Ø±Ø¬Ø§Ù„ÙŠØ© Ù…Ù…ÙŠØ²Ø© Ø¨Ø£Ø­Ø¬Ø§Ù… Ù…Ø®ØªÙ„ÙØ©.",
      image: "https://images.unsplash.com/photo-1517849845537-4d257902454a?auto=format&fit=crop&w=400&q=80",
      options: [
        { size: "3x5ml", price: 180 },
        { size: "3x3ml", price: 100 },
        { size: "3x10ml", price: 350 }
      ],
      popularity: 85,
      dateAdded: "2024-03-01"
    },
    {
      id: 'p2',
      title: "Ø¨ÙƒØ¬ Ø¹Ø·ÙˆØ± Ù†Ø³Ø§Ø¦ÙŠØ© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©",
      description: "Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø£Ø¬Ù…Ù„ Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ù†Ø³Ø§Ø¦ÙŠØ© Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©.",
      image: "https://images.unsplash.com/photo-1556228578-8c89e6adf883?auto=format&fit=crop&w=400&q=80",
      options: [
        { size: "3x5ml", price: 190 },
        { size: "3x3ml", price: 110 },
        { size: "3x10ml", price: 360 }
      ],
      popularity: 88,
      dateAdded: "2024-03-08"
    }
  ]
};

// Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
let cart = {};
let wishlist = [];
let userPoints = 0;
let userBalance = 0;
let shippingFee = 0;
let usedBalance = 0;
let reviews = {};
let activeFilters = { men: '', women: '', packages: '' };

const shippingOptions = {
  westbank: 20,
  jerusalem: 30,
  "48": 70
};

const ownerWhatsApp = "972599123456";

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
function loadData() {
  const savedCart = localStorage.getItem('aromaCart');
  const savedWishlist = localStorage.getItem('aromaWishlist');
  const savedPoints = localStorage.getItem('aromaPoints');
  const savedBalance = localStorage.getItem('aromaBalance');
  const savedReviews = localStorage.getItem('aromaReviews');

  if (savedCart) cart = JSON.parse(savedCart);
  if (savedWishlist) wishlist = JSON.parse(savedWishlist);
  if (savedPoints) userPoints = parseInt(savedPoints);
  if (savedBalance) userBalance = parseFloat(savedBalance);
  if (savedReviews) reviews = JSON.parse(savedReviews);

  updateUI();
}

// Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage
function saveData() {
  localStorage.setItem('aromaCart', JSON.stringify(cart));
  localStorage.setItem('aromaWishlist', JSON.stringify(wishlist));
  localStorage.setItem('aromaPoints', userPoints.toString());
  localStorage.setItem('aromaBalance', userBalance.toString());
  localStorage.setItem('aromaReviews', JSON.stringify(reviews));
}

// ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function updateUI() {
  updateCartBadge();
  updateWishlistBadge();
  updatePointsBadge();
  updatePointsDisplay();
}

// ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø³Ø¹Ø±
function formatPrice(amount) {
  return amount.toLocaleString() + " â‚ª";
}

// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø±Ù Ø§Ù„Ø·Ù„Ø¨
function generateOrderId() {
  return 'AC' + Date.now().toString().slice(-8) + Math.random().toString(36).substr(2, 4).toUpperCase();
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
function calculatePoints(orderTotal) {
  return Math.floor(orderTotal / 3);
}

// ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø© Ø§Ù„Ø³Ù„Ø©
function updateCartBadge() {
  const badge = document.getElementById('cart-badge');
  const count = Object.keys(cart).length;
  if (count > 0) {
    badge.textContent = count;
    badge.style.display = 'flex';
  } else {
    badge.style.display = 'none';
  }
}

// ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
function updateWishlistBadge() {
  const badge = document.getElementById('wishlist-badge');
  const count = wishlist.length;
  if (count > 0) {
    badge.textContent = count;
    badge.style.display = 'flex';
  } else {
    badge.style.display = 'none';
  }
}

// ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
function updatePointsBadge() {
  const badge = document.getElementById('points-badge');
  if (userPoints > 0) {
    badge.textContent = userPoints;
    badge.style.display = 'flex';
  } else {
    badge.style.display = 'none';
  }
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù†Ù‚Ø§Ø·
function updatePointsDisplay() {
  document.getElementById('user-points').textContent = userPoints.toLocaleString();
  document.getElementById('user-balance').textContent = formatPrice(userBalance);
  
  const pointsToNext = 30 - (userPoints % 30);
  const progress = ((userPoints % 30) / 30) * 100;
  
  document.getElementById('points-progress').style.width = progress + '%';
  document.getElementById('points-remaining').textContent = 
    pointsToNext === 30 ? '30 Ù†Ù‚Ø·Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ 1 Ø´ÙŠÙƒÙ„' : `${pointsToNext} Ù†Ù‚Ø·Ø© Ù…ØªØ¨Ù‚ÙŠØ© Ù„Ù„Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©`;

  // ØªØ­Ø¯ÙŠØ« ØµÙØ­Ø© Ø§Ù„Ù†Ù‚Ø§Ø·
  document.getElementById('total-points').textContent = userPoints.toLocaleString();
  document.getElementById('total-balance').textContent = formatPrice(userBalance);
  document.getElementById('total-spent').textContent = formatPrice(userPoints * 3);
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
function showNotification(message, type = 'success') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.innerHTML = `
    <div style="display: flex; align-items: center; gap: 0.5rem;">
      <span>${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}</span>
      <span>${message}</span>
    </div>
  `;
  
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.remove();
  }, 5000);
}

// Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
function addToCart(productId, sectionId) {
  const select = document.getElementById(`option-${productId}`);
  const selectedOption = select.options[select.selectedIndex];
  const size = selectedOption.value;
  const price = parseFloat(selectedOption.getAttribute('data-price'));
  
  const key = productId + "_" + size + "_" + sectionId;
  
  if(cart[key]) {
    cart[key].quantity++;
  } else {
    cart[key] = { 
      id: productId, 
      section: sectionId, 
      size, 
      price, 
      quantity: 1 
    };
  }
  
  saveData();
  updateUI();
  showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ›’');
}

// Ø¥Ø¶Ø§ÙØ©/Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©
function toggleWishlist(productId) {
  const index = wishlist.indexOf(productId);
  if (index > -1) {
    wishlist.splice(index, 1);
    showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©', 'info');
  } else {
    wishlist.push(productId);
    showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù…ÙØ¶Ù„Ø© â¤ï¸');
  }
  
  saveData();
  updateUI();
  
  // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø©
  const wishlistBtns = document.querySelectorAll(`[data-product-id="${productId}"]`);
  wishlistBtns.forEach(btn => {
    btn.classList.toggle('active', wishlist.includes(productId));
  });
  
  // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙØªÙˆØ­Ø©
  if (document.getElementById('wishlist').style.display !== 'none') {
    renderWishlist();
  }
}

// Ø±Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
function renderProducts(sectionId, containerId) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  
  const items = getFilteredProducts(sectionId) || [];
  
  items.forEach(item => {
    const card = document.createElement('article');
    card.classList.add('product-card');
card.innerHTML = `
  <div style="position: relative;">
    <img src="${item.image}" alt="${item.title}" class="product-image" crossorigin="anonymous" />
    <button class="wishlist-btn ${wishlist.includes(item.id) ? 'active' : ''}" 
            onclick="toggleWishlist('${item.id}')" 
            data-product-id="${item.id}"
            aria-label="${wishlist.includes(item.id) ? 'Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©' : 'Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©'}">
      ${wishlist.includes(item.id) ? 'â¤ï¸' : 'ğŸ¤'}
    </button>
    ${item.popularity && item.popularity > 90 ? '<div style="position: absolute; top: 12px; right: 12px; background: #fbbf24; color: white; padding: 0.25rem 0.5rem; border-radius: 6px; font-size: 0.75rem; font-weight: bold;">Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹</div>' : ''}
  </div>
  <div class="product-info">
    <h3 class="product-title">${item.title}</h3>
    <p class="product-desc">${item.description}</p>
    
    <div class="product-options">
      <label for="option-${item.id}">Ø§Ù„Ø­Ø¬Ù…:</label>
      <select id="option-${item.id}">
        ${item.options.map(opt => 
          `<option value="${opt.size}" data-price="${opt.price}">${opt.size} - ${opt.price} Ø´ÙŠÙƒÙ„</option>`
        ).join('')}
      </select>
    </div>
    <div class="product-price" id="price-${item.id}">${item.options[0].price} â‚ª</div>
    <button class="add-to-cart" onclick="addToCart('${item.id}', '${sectionId}')" aria-label="Ø¥Ø¶Ø§ÙØ© ${item.title} Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©">
      ğŸ›’ Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©
    </button>
  </div>
`;
    container.appendChild(card);
    
    const select = card.querySelector(`#option-${item.id}`);
    const priceDiv = card.querySelector(`#price-${item.id}`);
    
    select.addEventListener('change', function() {
      const selected = select.options[select.selectedIndex];
      priceDiv.textContent = selected.getAttribute('data-price') + " â‚ª";
    });
  });
}

// Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª
function renderReviews(productId) {
  const productReviews = reviews[productId] || [];
  const averageRating = productReviews.length > 0 
    ? (productReviews.reduce((sum, review) => sum + review.rating, 0) / productReviews.length).toFixed(1)
    : 0;

  return `
    <div class="stars">
      ${[1,2,3,4,5].map(star => 
        `<span class="star ${star <= averageRating ? 'filled' : ''}">${star <= averageRating ? 'â­' : 'â˜†'}</span>`
      ).join('')}
      <span style="font-size: 0.8rem; color: #6b7280; margin-right: 0.5rem;">
        (${averageRating}) â€¢ ${productReviews.length} ØªÙ‚ÙŠÙŠÙ…
      </span>
    </div>
    <button onclick="showReviewForm('${productId}')" style="background: none; border: 1px solid #e5e7eb; padding: 0.25rem 0.5rem; border-radius: 6px; font-size: 0.8rem; cursor: pointer; margin-top: 0.5rem;">
      Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…
    </button>
  `;
}

function showReviewForm(productId) {
  const existingForm = document.querySelector('.review-form');
  if (existingForm) existingForm.remove();

  const form = document.createElement('div');
  form.className = 'review-form';
  form.innerHTML = `
    <h4 style="margin-bottom: 1rem;">Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ…</h4>
    <div class="stars" style="margin-bottom: 0.5rem;">
      ${[1,2,3,4,5].map(star => 
        `<span class="star" onclick="setRating(${star})" data-rating="${star}">â˜†</span>`
      ).join('')}
    </div>
    <input type="text" placeholder="Ø§Ø³Ù…Ùƒ" id="reviewer-name" />
    <textarea placeholder="ØªØ¹Ù„ÙŠÙ‚Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬..." id="review-comment" rows="3"></textarea>
    <div style="display: flex; gap: 0.5rem;">
      <button onclick="submitReview('${productId}')" style="background: #1e293b; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer;">Ø¥Ø¶Ø§ÙØ©</button>
      <button onclick="this.closest('.review-form').remove()" style="background: #6b7280; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer;">Ø¥Ù„ØºØ§Ø¡</button>
    </div>
  `;

  document.body.appendChild(form);
  
  // ØªÙ…ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
  form.style.position = 'fixed';
  form.style.top = '50%';
  form.style.left = '50%';
  form.style.transform = 'translate(-50%, -50%)';
  form.style.zIndex = '1000';
  form.style.background = 'white';
  form.style.padding = '2rem';
  form.style.borderRadius = '12px';
  form.style.boxShadow = '0 10px 25px rgba(0,0,0,0.3)';
  form.style.maxWidth = '400px';
  form.style.width = '90%';
}

let selectedRating = 5;

function setRating(rating) {
  selectedRating = rating;
  const stars = document.querySelectorAll('.review-form .star');
  stars.forEach((star, index) => {
    star.textContent = index < rating ? 'â­' : 'â˜†';
  });
}

function submitReview(productId) {
  const name = document.getElementById('reviewer-name').value.trim();
  const comment = document.getElementById('review-comment').value.trim();
  
  if (!name || !comment) {
    showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
    return;
  }

  if (!reviews[productId]) {
    reviews[productId] = [];
  }

  reviews[productId].push({
    id: Date.now(),
    rating: selectedRating,
    comment: comment,
    customerName: name,
    date: new Date().toISOString()
  });

  saveData();
  showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­! â­');
  
  document.querySelector('.review-form').remove();
  
  // Ø¥Ø¹Ø§Ø¯Ø© Ø±Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
  const currentSection = document.querySelector('.store-section:not([hidden])').id;
  if (['men', 'women', 'packages'].includes(currentSection)) {
    renderProducts(currentSection, currentSection + '-products');
  }
}

// Ø§Ù„ÙÙ„ØªØ±Ø©
function getFilteredProducts(sectionId) {
  let products = [...productsData[sectionId]];
  const filter = activeFilters[sectionId];
  
  switch (filter) {
    case 'most-popular':
      products.sort((a, b) => (b.popularity || 0) - (a.popularity || 0));
      break;
    case 'price-asc':
      products.sort((a, b) => {
        const aMinPrice = Math.min(...a.options.map(opt => opt.price));
        const bMinPrice = Math.min(...b.options.map(opt => opt.price));
        return aMinPrice - bMinPrice;
      });
      break;
    case 'price-desc':
      products.sort((a, b) => {
        const aMaxPrice = Math.max(...a.options.map(opt => opt.price));
        const bMaxPrice = Math.max(...b.options.map(opt => opt.price));
        return bMaxPrice - aMaxPrice;
      });
      break;
    case 'latest':
      products.sort((a, b) => new Date(b.dateAdded || '') - new Date(a.dateAdded || ''));
      break;
  }
  
  return products;
}

function filterProducts(sectionId, filterType) {
  if (activeFilters[sectionId] === filterType) {
    activeFilters[sectionId] = '';
  } else {
    activeFilters[sectionId] = filterType;
  }
  
  updateFilterButtons(sectionId);
  renderProducts(sectionId, sectionId + '-products');
}

function updateFilterButtons(sectionId) {
  const buttons = document.querySelectorAll(`#${sectionId} .filter-button`);
  buttons.forEach(button => {
    button.classList.remove('active');
    const buttonText = button.textContent;
    let filterType = '';
    
    if (buttonText.includes('Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹')) filterType = 'most-popular';
    else if (buttonText.includes('Ù…Ù† Ø§Ù„Ø£Ø¯Ù†Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰')) filterType = 'price-asc';
    else if (buttonText.includes('Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¯Ù†Ù‰')) filterType = 'price-desc';
    else if (buttonText.includes('Ø§Ù„Ø£Ø­Ø¯Ø«')) filterType = 'latest';
    
    if (activeFilters[sectionId] === filterType) {
      button.classList.add('active');
    }
  });
}

// Ø§Ù„Ø¨Ø­Ø«
function searchProducts(query) {
  const resultsContainer = document.getElementById('search-results');
  const resultsContainerWrapper = document.getElementById('search-results-container');
  const resultsTitle = document.getElementById('search-results-title');
  const resultsCount = document.getElementById('search-results-count');
  
  if (!query.trim()) {
    resultsContainerWrapper.classList.remove('show');
    return;
  }
  
  resultsContainerWrapper.classList.add('show');
  
  let found = [];
  Object.entries(productsData).forEach(([section, arr]) => {
    arr.forEach(item => {
      if(item.title.toLowerCase().includes(query.toLowerCase()) || 
         item.description.toLowerCase().includes(query.toLowerCase())) {
        found.push({...item, section});
      }
    });
  });
  
  resultsTitle.textContent = `Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† "${query}"`;
  resultsCount.textContent = `ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${found.length} Ù…Ù†ØªØ¬`;
  
  resultsContainer.innerHTML = '';
  
  if (found.length === 0) {
    resultsContainer.innerHTML = `
      <div class="empty-state">
        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¨Ø­Ø«Ùƒ</h3>
        <p>Ø¬Ø±Ø¨ ÙƒÙ„Ù…Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ø£Ùˆ ØªØµÙØ­ Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…ØªØ¬Ø±</p>
      </div>
    `;
    return;
  }
  
  found.forEach(item => {
    const card = document.createElement('article');
    card.classList.add('product-card');
    card.innerHTML = `
      <div style="position: relative;">
        <img src="${item.image}" alt="${item.title}" class="product-image" crossorigin="anonymous" />
        <button class="wishlist-btn ${wishlist.includes(item.id) ? 'active' : ''}" 
                onclick="toggleWishlist('${item.id}')" 
                data-product-id="${item.id}">
          ${wishlist.includes(item.id) ? 'â¤ï¸' : 'ğŸ¤'}
        </button>
      </div>
      <div class="product-info">
        <h3 class="product-title">${item.title}</h3>
        <p class="product-desc">${item.description}</p>
        <div class="product-options">
          <label for="search-option-${item.id}">Ø§Ù„Ø­Ø¬Ù…:</label>
          <select id="search-option-${item.id}">
            ${item.options.map(opt => 
              `<option value="${opt.size}" data-price="${opt.price}">${opt.size} - ${opt.price} Ø´ÙŠÙƒÙ„</option>`
            ).join('')}
          </select>
        </div>
        <div class="product-price" id="search-price-${item.id}">${item.options[0].price} â‚ª</div>
        <button class="add-to-cart" onclick="addToCartFromSearch('${item.id}', '${item.section}')">
          ğŸ›’ Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©
        </button>
      </div>
    `;
    resultsContainer.appendChild(card);
    
    const select = card.querySelector(`#search-option-${item.id}`);
    const priceDiv = card.querySelector(`#search-price-${item.id}`);
    
    select.addEventListener('change', function() {
      const selected = select.options[select.selectedIndex];
      priceDiv.textContent = selected.getAttribute('data-price') + " â‚ª";
    });
  });
}

function addToCartFromSearch(productId, sectionId) {
  const select = document.getElementById(`search-option-${productId}`);
  const selectedOption = select.options[select.selectedIndex];
  const size = selectedOption.value;
  const price = parseFloat(selectedOption.getAttribute('data-price'));
  
  const key = productId + "_" + size + "_" + sectionId;
  
  if(cart[key]) {
    cart[key].quantity++;
  } else {
    cart[key] = { 
      id: productId, 
      section: sectionId, 
      size, 
      price, 
      quantity: 1 
    };
  }
  
  saveData();
  updateUI();
  showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­! ğŸ›’');
}

// Ø±Ø³Ù… Ø§Ù„Ø³Ù„Ø©
function renderCart() {
  const cartItemsContainer = document.getElementById('cart-items');
  cartItemsContainer.innerHTML = '';
  let subtotal = 0;
  
  const keys = Object.keys(cart);
  if(keys.length === 0){
    cartItemsContainer.innerHTML = `
      <div class="empty-state">
        <h3>ğŸ›’ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</h3>
        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ø±Ø§Ø¦Ø¹Ø©!</p>
      </div>
    `;
    document.getElementById('cart-total').textContent = 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0 â‚ª';
    return;
  }
  
  keys.forEach(key => {
    const item = cart[key];
    const product = productsData[item.section].find(p => p.id === item.id);
    if (!product) return;
    
    const itemTotal = item.price * item.quantity;
    subtotal += itemTotal;
    
    const cartItem = document.createElement('div');
    cartItem.classList.add('cart-item');
    cartItem.innerHTML = `
      <div class="cart-item-details">
        <div class="cart-item-title">${product.title}</div>
        <div style="font-size: 0.9rem; color: #6b7280; margin: 0.25rem 0;">Ø§Ù„Ø­Ø¬Ù…: ${item.size}</div>
        <div class="cart-item-quantity">
          <button class="quantity-btn" onclick="changeCartQuantity('${key}', -1)" aria-label="ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©">-</button>
          <span style="font-weight: bold; margin: 0 0.5rem;">${item.quantity}</span>
          <button class="quantity-btn" onclick="changeCartQuantity('${key}', 1)" aria-label="Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒÙ…ÙŠØ©">+</button>
        </div>
      </div>
      <div class="cart-item-price">${formatPrice(itemTotal)}</div>
      <button class="remove-btn" onclick="removeFromCart('${key}')" aria-label="Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬">&times;</button>
    `;
    cartItemsContainer.appendChild(cartItem);
  });
  
  const total = subtotal + shippingFee - usedBalance;
  
  if (shippingFee > 0) {
    cartItemsContainer.innerHTML += `
      <div style="text-align: right; margin: 1rem 0; padding: 1rem; background: #f8fafc; border-radius: 12px; border: 2px solid #e2e8f0;">
        <strong>Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù†: ${formatPrice(shippingFee)}</strong>
      </div>
    `;
  }
  
  if (usedBalance > 0) {
    cartItemsContainer.innerHTML += `
      <div style="text-align: right; margin: 1rem 0; padding: 1rem; background: #f0fdf4; border-radius: 12px; border: 2px solid #22c55e; color: #15803d;">
        <strong>Ø®ØµÙ… Ø§Ù„Ø±ØµÙŠØ¯: -${formatPrice(usedBalance)}</strong>
      </div>
    `;
  }
  
  if (userBalance > 0 && usedBalance === 0) {
    cartItemsContainer.innerHTML += `
      <div style="text-align: center; margin: 1rem 0; padding: 1rem; background: #fef3c7; border-radius: 12px; border: 2px solid #f59e0b;">
        <p style="margin-bottom: 0.5rem; color: #92400e;"><strong>ğŸ’° Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ù…ØªØ§Ø­: ${formatPrice(userBalance)}</strong></p>
        <button onclick="useBalance()" style="background: #f59e0b; color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-weight: bold;">
          Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±ØµÙŠØ¯
        </button>
      </div>
    `;
  }
  
  document.getElementById('cart-total').textContent = `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${formatPrice(total)}`;
}

function changeCartQuantity(key, delta) {
  if(cart[key]) {
    cart[key].quantity += delta;
    if(cart[key].quantity <= 0) delete cart[key];
    saveData();
    updateUI();
    renderCart();
  }
}

function removeFromCart(key) {
  if(cart[key]) {
    delete cart[key];
    saveData();
    updateUI();
    renderCart();
    showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©', 'info');
  }
}

function useBalance() {
  const subtotal = Object.values(cart).reduce((total, item) => total + (item.price * item.quantity), 0);
  const total = subtotal + shippingFee;
  const maxUsable = Math.min(userBalance, total);
  
  if (maxUsable > 0) {
    usedBalance = maxUsable;
    renderCart();
    showNotification(`ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… ${formatPrice(maxUsable)} Ù…Ù† Ø±ØµÙŠØ¯Ùƒ! ğŸ’°`);
  }
}

// Ø±Ø³Ù… Ø§Ù„Ù…ÙØ¶Ù„Ø©
function renderWishlist() {
  const container = document.getElementById('wishlist-items');
  container.innerHTML = '';
  
  if (wishlist.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <h3>â¤ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©</h3>
        <p>Ø£Ø¶Ù Ø¨Ø¹Ø¶ Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„Ø¯ÙŠÙƒ!</p>
      </div>
    `;
    return;
  }
  
  wishlist.forEach(productId => {
    let product = null;
    let sectionId = '';
    
    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    for (const [section, products] of Object.entries(productsData)) {
      const found = products.find(p => p.id === productId);
      if (found) {
        product = found;
        sectionId = section;
        break;
      }
    }
    
    if (!product) return;
    
    const card = document.createElement('article');
    card.classList.add('product-card');
    card.innerHTML = `
      <div style="position: relative;">
        <img src="${product.image}" alt="${product.title}" class="product-image" crossorigin="anonymous" />
        <button class="wishlist-btn active" onclick="toggleWishlist('${product.id}')" data-product-id="${product.id}">
          â¤ï¸
        </button>
      </div>
      <div class="product-info">
        <h3 class="product-title">${product.title}</h3>
        <p class="product-desc">${product.description}</p>
        <div class="product-options">
          <label for="wishlist-option-${product.id}">Ø§Ù„Ø­Ø¬Ù…:</label>
          <select id="wishlist-option-${product.id}">
            ${product.options.map(opt => 
              `<option value="${opt.size}" data-price="${opt.price}">${opt.size} - ${opt.price} Ø´ÙŠÙƒÙ„</option>`
            ).join('')}
          </select>
        </div>
        <div class="product-price" id="wishlist-price-${product.id}">${product.options[0].price} â‚ª</div>
        <button class="add-to-cart" onclick="addToCartFromWishlist('${product.id}', '${sectionId}')">
          ğŸ›’ Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ø±Ø¨Ø©
        </button>
      </div>
    `;
    container.appendChild(card);
    
    const select = card.querySelector(`#wishlist-option-${product.id}`);
    const priceDiv = card.querySelector(`#wishlist-price-${product.id}`);
    
    select.addEventListener('change', function() {
      const selected = select.options[select.selectedIndex];
      priceDiv.textContent = selected.getAttribute('data-price') + " â‚ª";
    });
  });
}

function addToCartFromWishlist(productId, sectionId) {
  const select = document.getElementById(`wishlist-option-${productId}`);
  const selectedOption = select.options[select.selectedIndex];
  const size = selectedOption.value;
  const price = parseFloat(selectedOption.getAttribute('data-price'));
  
  const key = productId + "_" + size + "_" + sectionId;
  
  if(cart[key]) {
    cart[key].quantity++;
  } else {
    cart[key] = { 
      id: productId, 
      section: sectionId, 
      size, 
      price, 
      quantity: 1 
    };
  }
  
  saveData();
  updateUI();
  showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©! ğŸ›’â¤ï¸');
}

// ØªØ­Ø¯ÙŠØ« Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù†
function updateShipping() {
  const regionSelect = document.getElementById('region');
  const selectedRegion = regionSelect.value;
  shippingFee = shippingOptions[selectedRegion] || 0;
  renderCart();
}

// ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
function switchSection(sectionId) {
  document.querySelectorAll('.store-section').forEach(section => {
    section.hidden = true;
  });
  document.querySelectorAll('nav .nav-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  
  const activeSection = document.getElementById(sectionId);
  if(activeSection) {
    activeSection.hidden = false;
  }
  
  document.querySelectorAll('nav .nav-btn').forEach(btn => {
    if(btn.getAttribute('data-section') === sectionId) btn.classList.add('active');
  });
  
  if(['men','women','packages'].includes(sectionId)) {
    renderProducts(sectionId, sectionId + '-products');
  }
  
  if(sectionId === 'cart') {
    renderCart();
  }
  
  if(sectionId === 'wishlist') {
    renderWishlist();
  }
  
  if(sectionId !== 'home') {
    const resultsContainer = document.getElementById('search-results-container');
    if(resultsContainer) {
      resultsContainer.classList.remove('show');
    }
  }
}

// ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
// ÙÙŠ Ø¯Ø§Ù„Ø© submitOrderØŒ Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø®Ø§Øµ Ø¨Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù‡Ø°Ø§:

function submitOrder(event) {
  event.preventDefault();
  
  if (Object.keys(cart).length === 0) {
    showNotification('Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©! ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ù‚Ø¨Ù„ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨.', 'error');
    return;
  }
  
  const formData = new FormData(event.target);
  const subtotal = Object.values(cart).reduce((total, item) => total + (item.price * item.quantity), 0);
  const total = subtotal + shippingFee - usedBalance;
  const orderId = generateOrderId();
  
  // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø·
  const earnedPoints = calculatePoints(total);
  userPoints += earnedPoints;
  
  // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯
  const newBalance = Math.floor(userPoints / 30);
  const currentBalance = Math.floor((userPoints - earnedPoints) / 30);
  if (newBalance > currentBalance) {
    userBalance += (newBalance - currentBalance);
    showNotification(`ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${newBalance - currentBalance} Ø´ÙŠÙƒÙ„ ÙÙŠ Ø±ØµÙŠØ¯Ùƒ!`);
  }
  
  // Ø®ØµÙ… Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  if (usedBalance > 0) {
    userBalance -= usedBalance;
  }

  // â­ Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© (Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø¬Ø¯ÙŠØ¯)
  try {
    const orders = JSON.parse(localStorage.getItem('aromaCornerOrders') || '[]');
    const newOrder = {
      id: orderId,
      customerName: formData.get('fullName'),
      phone: formData.get('phone'),
      address: formData.get('address'),
      region: formData.get('region'),
      items: {...cart}, // Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ø³Ù„Ø©
      subtotal: subtotal,
      shippingFee: shippingFee,
      usedBalance: usedBalance,
      total: total,
      earnedPoints: earnedPoints,
      notes: formData.get('notes') || '',
      status: 'pending', // Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
      timestamp: new Date().toISOString(),
      lastUpdated: new Date().toISOString()
    };
    
    orders.push(newOrder);
    localStorage.setItem('aromaCornerOrders', JSON.stringify(orders));
    
    console.log('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­:', newOrder);
  } catch (error) {
    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨:', error);
    showNotification('ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆÙ„ÙƒÙ† Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸', 'error');
  }
  
  // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ø®Øµ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯)
  let orderSummary = `ğŸ›ï¸ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Aroma Corner*\n\n`;
  orderSummary += `ğŸ“‹ *Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:* ${orderId}\n\n`;
  orderSummary += `ğŸ‘¤ *Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„:*\n`;
  orderSummary += `Ø§Ù„Ø§Ø³Ù…: ${formData.get('fullName')}\n`;
  orderSummary += `Ø§Ù„Ù‡Ø§ØªÙ: ${formData.get('phone')}\n`;
  orderSummary += `Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${formData.get('address')}\n`;
  orderSummary += `Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ${getRegionName(formData.get('region'))}\n\n`;
  
  orderSummary += `ğŸ›’ *ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨:*\n`;
  Object.values(cart).forEach(item => {
    const product = productsData[item.section].find(p => p.id === item.id);
    orderSummary += `â€¢ ${product.title} - ${item.size} Ã— ${item.quantity} = ${formatPrice(item.price * item.quantity)}\n`;
  });
  
  orderSummary += `\nğŸ’° *Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ:*\n`;
  orderSummary += `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙØ±Ø¹ÙŠ: ${formatPrice(subtotal)}\n`;
  if (shippingFee > 0) {
    orderSummary += `Ø±Ø³ÙˆÙ… Ø§Ù„Ø´Ø­Ù†: ${formatPrice(shippingFee)}\n`;
  }
  if (usedBalance > 0) {
    orderSummary += `Ø®ØµÙ… Ø§Ù„Ø±ØµÙŠØ¯: -${formatPrice(usedBalance)}\n`;
  }
  orderSummary += `*Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${formatPrice(total)}*\n\n`;
  
  orderSummary += `â­ *Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©:* ${earnedPoints} Ù†Ù‚Ø·Ø©\n`;
  orderSummary += `ğŸ’ *Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù†Ù‚Ø§Ø·Ùƒ:* ${userPoints} Ù†Ù‚Ø·Ø©\n\n`;
  
  if (formData.get('notes')) {
    orderSummary += `ğŸ“ *Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${formData.get('notes')}\n\n`;
  }
  
  orderSummary += `â° *ÙˆÙ‚Øª Ø§Ù„Ø·Ù„Ø¨:* ${new Date().toLocaleString('ar-EG')}\n`;
  orderSummary += `ğŸ’³ *Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:* Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…`;
  
  // Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
  const whatsappMessage = encodeURIComponent(orderSummary);
  const whatsappUrl = `https://wa.me/${ownerWhatsApp}?text=${whatsappMessage}`;
  window.open(whatsappUrl, '_blank');
  
  // Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„Ù†Ù…ÙˆØ°Ø¬
  cart = {};
  usedBalance = 0;
  event.target.reset();
  shippingFee = 0;
  
  saveData();
  updateUI();
  renderCart();
  
  showNotification(`ğŸ‰ ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${orderId}. Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${earnedPoints} Ù†Ù‚Ø·Ø©!`);
}
function getRegionName(regionCode) {
  const regions = {
    westbank: 'Ø§Ù„Ø¶ÙØ© Ø§Ù„ØºØ±Ø¨ÙŠØ©',
    jerusalem: 'Ø§Ù„Ù‚Ø¯Ø³',
    '48': 'Ø§Ù„Ø¯Ø§Ø®Ù„'
  };
  return regions[regionCode] || regionCode;
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ†Ù‚Ù„
document.querySelectorAll('.nav-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    switchSection(this.getAttribute('data-section'));
  });
});

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
document.addEventListener('DOMContentLoaded', function() {
  loadData();
  switchSection('home');
});

// Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©
window.addEventListener('beforeunload', function() {
  saveData();
});
</script>

<!-- Schema.org Ù„Ù„Ù…ØªØ¬Ø± -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Store",
  "name": "Aroma Corner",
  "description": "Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø¨Ø£Ø­Ø¬Ø§Ù… Ù…Ø®ØªÙ„ÙØ©",
  "url": "https://aromacorner.com",
  "telephone": "+972599123456",
  "address": {
    "@type": "PostalAddress",
    "addressCountry": "PS"
  },
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "Ø¹Ø·ÙˆØ± Ø¹Ø§Ù„Ù…ÙŠØ©",
    "itemListElement": [
      {
        "@type": "Offer",
        "itemOffered": {
          "@type": "Product",
          "name": "Ø¹Ø·ÙˆØ± Ø±Ø¬Ø§Ù„ÙŠØ©",
          "category": "Ø¹Ø·ÙˆØ±"
        }
      },
      {
        "@type": "Offer", 
        "itemOffered": {
          "@type": "Product",
          "name": "Ø¹Ø·ÙˆØ± Ù†Ø³Ø§Ø¦ÙŠØ©",
          "category": "Ø¹Ø·ÙˆØ±"
        }
      }
    ]
  }
// Ø¯Ø§Ù„Ø© ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
function openAdminPanel() {
  // ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯
  window.open('admin.html', '_blank');
}

// Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©)
function checkNewOrders() {
  try {
    const orders = JSON.parse(localStorage.getItem('aromaCornerOrders') || '[]');
    const pendingOrders = orders.filter(order => order.status === 'pending').length;
    
    if (pendingOrders > 0) {
      // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ù‡Ù†Ø§
      console.log(`ÙŠÙˆØ¬Ø¯ ${pendingOrders} Ø·Ù„Ø¨ Ù…Ø¹Ù„Ù‚`);
    }
  } catch (error) {
    console.error('Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø·Ù„Ø¨Ø§Øª:', error);
  }
}

// ÙØ­Øµ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
setInterval(checkNewOrders, 60000);
}
</script>

</body>
</html>